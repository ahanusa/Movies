function url(n,t){return`https://api.themoviedb.org/3/search/movie?api_key=${t}&language=en-US&query=${n}&page=1&include_adult=false`}function imageUrl(n){return n?`https://image.tmdb.org/t/p/w154/${n}`:null}function mapData(n){return{id:n.id,imageUrl:imageUrl(n.poster_path),title:n.title,releaseDate:n.release_date,overview:n.overview,isSelected:!1}}Vue.component("searchBox",{template:`<div class="searchBox" for="search">
              <label for="search" class="fa fa-search fa-3" aria-hidden="true"></label>
              <input id="search"
                     type="text"
                     v-on:keyup="onTextEntered($event)"
                     v-on:input="onInput($event)"
                     v-on:click="onSelectAllText($event)" />
             </div>`,methods:{onSelectAllText:function(n){n.target.select()},onTextEntered:function(n){this.$emit("text-entered",n.target.value)},onInput:function(n){this.$emit("input",n.target.value)}}});Vue.component("moviesList",{template:`<div>
                <div class="movie" v-for="movie in movies">
                  <i class="action-button fa fa-minus"
                     v-if="movie.canDelete"
                     v-bind:id="movie.id"
                     v-on:click="deleteMovie($event.target)"
                     aria-hidden="true">
                  </i>
                  <i class="action-button right fa fa-plus"
                     v-bind:id="movie.id"
                     v-on:click="addMovie($event.target)"
                     aria-hidden="true">
                  </i>
                  <img v-bind:alt="movie.title"
                      v-bind:id="movie.id"
                      v-bind:class="{ noImage: !movie.imageUrl, selected: movie.isSelected }"
                      v-bind:src="movie.imageUrl"
                      v-on:click="selectMovie($event.target)" />
                </div>
            </div>`,props:["movies"],methods:{selectMovie:function(n){this.$emit("movie-selected",n.id)},addMovie:function(n){this.$emit("add-request",n.id)},deleteMovie:function(n){this.$emit("delete-request",n.id)}}});Vue.component("movie-details",{template:`<div>
               <h3>{{ movie.title }} ({{ new Date(movie.releaseDate).getFullYear() }})</h3>
               <p>{{ movie.overview }}</p>
             </div>`,props:["movie"]});var app=new Vue({el:"#app",data:{movies:[],selectedMovie:null},methods:{search:function(n){if(n&&n.trim().length>0){let t=JSON.parse(window.localStorage.getItem("preferences")),i=url(n,t.apiKey);axios.get(i).then(n=>app.movies=n.data.results.map(mapData))}else app.movies=[],app.selectedId=null},setMovie:function(n){var t=this.movies.find(t=>t.id==n);t.isSelected=!0;this.selectedMovie=t;this.movies.filter(t=>t.id!=n).forEach(n=>n.isSelected=!1)},addMovie:function(n){var t=this.movies.find(t=>t.id==n);axios.post("/api/movies",t).then(()=>alertify.success("Movie Saved"))}}});