Vue.component("prefs",{template:`<div class='prefs'>
               <div>
                 <label>API Key</label>
                 <input type='text'
                   id="apiKey"
                   v-on:change=propChanged($event)
                   v-bind:value=preferences.apiKey />
               </div>
               <div>
                 <label>Categories</label>
                 <input-tags
                   v-bind:tags="getCategories()"
                   v-on:tag-added="categoryAdded"
                   v-on:tag-deleted="categoryDeleted" >
                 </input-tags>
               </div>
             </div>`,props:["preferences"],methods:{getCategories:function(){return this.preferences.categories.map(n=>n.name)},propChanged:function(n){this.$emit("pref-changed",n.target.id,n.target.value)},categoryAdded:function(n){this.$emit("category-added",n)},categoryDeleted:function(n){this.$emit("category-deleted",n)}}});var app=new Vue({el:"#app",data:{preferences:""},created:function(){axios.get("/api/categories").then(n=>{let t=window.localStorage.getItem("preferences");this.preferences=JSON.parse(t)||{};this.preferences.categories=n.data})},methods:{savePreferences:function(n,t){n&&(this.preferences[n]=t,window.localStorage.setItem("preferences",JSON.stringify(this.preferences)))},addCategory:function(n){let t=`/api/categories/`;axios.post(t,{name:n}).then(n=>{this.preferences.categories.push(n.data)})},deleteCategory:function(n){let t=this.preferences.categories.find(t=>t.name===n),i=`/api/categories/${t.id}`;axios.delete(i).then(()=>{this.preferences.categories.splice(this.preferences.categories.indexOf(t),1)})}}});